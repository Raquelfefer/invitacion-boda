<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cr칩nica de Sociedad de Lady Whistledown</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
	<link rel="stylesheet" href="style.css">
</head>
<body onload="toggleNinos()">
	<audio id="musica" loop>
	    <source src="musica.mp3" type="audio/mpeg">
	</audio>
	<button id="botonMusica" class="music-button">
    游꿭
	</button>
	<script>
		const audio = document.getElementById("musica");
		const boton = document.getElementById("botonMusica");
		
		let fadeInterval;
		audio.volume = 0;
		
		function fadeInAudio() {
		    audio.volume = 0;
		    audio.play();
		
		    fadeInterval = setInterval(() => {
		        if (audio.volume < 0.4) {
		            audio.volume = Math.min(audio.volume + 0.02, 0.4);
		        } else {
		            clearInterval(fadeInterval);
		        }
		    }, 200);
		}
		
		function fadeOutAudio() {
		    fadeInterval = setInterval(() => {
		        if (audio.volume > 0.02) {
		            audio.volume = Math.max(audio.volume - 0.02, 0);
		        } else {
		            clearInterval(fadeInterval);
		            audio.pause();
		        }
		    }, 200);
		}
		
		boton.addEventListener("click", () => {
		    if (audio.paused) {
		        fadeInAudio();
		        boton.classList.add("playing");
		        localStorage.setItem("musicaActiva", "true");
		    } else {
		        fadeOutAudio();
		        boton.classList.remove("playing");
		        localStorage.setItem("musicaActiva", "false");
		    }
		});
		
		/* Recordar estado */
		window.addEventListener("load", () => {
		    if (localStorage.getItem("musicaActiva") === "true") {
		        fadeInAudio();
		        boton.classList.add("playing");
		    }
		});
	</script>

    <div class="paper-container">
        <header class="periodico-header">
			<div class="header-top">
				<span class="lugar-fecha">Londres, 1813</span>
			</div>
			<div class="logo-container">
				<img src="logo.png" alt="Lady Whistledown" class="logo">
			</div>
			<h1 class="titulo-principal">LADY WHISTLEDOWN</h1>
			<div class="header-subtitle">CR칍NICA DE SOCIEDAD</div>
			<hr class="double-line">
		</header>

        <main>
            <section class="intro">
                <p class="drop-cap">Querido y amado lector, se dice que la paciencia es una virtud, pero esta autora ha recibido noticias que prometen agitar los corazones m치s discretos de nuestra sociedad.. Un compromiso de avecina y promete ser el evento m치s deslumbrante de la temporada.</p>
                
                <h2 class="names">Mart칤n & Raquel</h2>
                
                <p>Con gran placer, anuncian a quienes estiman su presencia que celebrar치n su uni칩n en una ceremonia que ser치 recordada con deleite por todos los asistentes. Se ruega a los invitados preparar sus mejores sonrisas, porque la alegr칤a ser치 la protagonista indiscutible de la velada.</p>
            </section>

            <section class="details">
                <h3>Detalles del esperado evento</h3>
                <p><strong>FECHA:</strong> 24 de Octubre, 2026 - 12:30h</p>
                <p><strong>LUGAR:</strong> Hacienda "Los Cortijillos", Fuente Palmera</p>
                
                <div class="map-container">
                   <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3156.2727937929544!2d-5.125894924606572!3d37.713274215701155!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd12d38c2b87c22b%3A0xbad0616f95d242aa!2sHacienda%20los%20cortijillos!5e0!3m2!1ses!2ses!4v1771233806372!5m2!1ses!2ses" width="100%" height="400" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </section>

            
            <section class="rsvp">
				<h3>Confirmaci칩n de Asistencia</h3>
				<p><i>Se ruega a los invitados que informen a esta autora de sus planes con la mayor brevedad.</i></p>

				<form id="miFormulario" onsubmit="return enviarFormulario(event)">

					<div class="form-group">
						<label>Nombre completo</label>
						<input type="text" name="entry.2114290962" required>
					</div>

					<div class="form-group">
						<label>N칰mero de acompa침antes (incluido usted)</label>
						<select name="entry.2031160493" required>
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="No asistir칠">No asistir칠</option>
						</select>
					</div>

					<div class="form-group">
						<label>쯌endr치 con ni침os?</label>
						<select name="entry.1169705358" id="vienenNinos" onchange="toggleNinos()" required>
							<option value="No">No</option>
							<option value="S칤">S칤</option>
						</select>
					</div>

					<div id="seccionEdades" style="display: none;">
						<div class="form-group">
							<label>Indique cuantos y edad de los mismos</label>
							<input type="text" name="entry.1056378089" id="inputEdades" placeholder="Ej: 2 ni침os, 4 y 7 a침os">
						</div>
					</div>

					<div class="form-group">
						<label>Intolerancias alimentarias</label>
						<textarea name="entry.1690672333" rows="2"></textarea>
					</div>

					<div class="form-group">
						<label>쯋tilizar치 el autob칰s que pondremos a su disposici칩n? Salida desde Posadas </label>
						<select name="entry.386463953" required>
							<option value="Ida">Ida</option>
							<option value="Vuelta">Vuelta</option>
							<option value="Ida/Vuelta">Ida/Vuelta</option>
							<option value="No lo usar칠">No lo usar칠</option>
						</select>
					</div>

					<div class="form-group">
						<label>Sugerencias</label>
						<input type="text" name="entry.1099418048">
					</div>

					<button type="submit" class="button">Enviar</button>
				</form>
			</section>
			<script>
				function toggleNinos() {
				    var select = document.getElementById("vienenNinos");
				    var seccion = document.getElementById("seccionEdades");
				    var input = document.getElementById("inputEdades");
				    
				    if (select.value === "S칤") {
				        seccion.style.display = "block";
				        input.value = "";
				    } else {
				        seccion.style.display = "none";
				        input.value = "";
				    }
				}
				
				function enviarFormulario(e) {
				    e.preventDefault(); 
				
				    var select = document.getElementById("vienenNinos");
				    var input = document.getElementById("inputEdades");
				
				    if (select.value === "S칤" && !input.value.trim()) {
				        Swal.fire({
						    icon: "warning",
						    title: "Informaci칩n incompleta",
						    text: "Esta autora ruega indique cu치ntos ni침os asistir치n y sus edades.",
						    confirmButtonText: "Entendido"
						});
				        input.focus();
				        return false;
				    }
				
				    var form = document.getElementById("miFormulario");
				    var formData = new FormData(form);
				
				    fetch("https://docs.google.com/forms/d/e/1FAIpQLSfSWzc1xoHQXI6Nxj_cxTT89VCTf7IliCilZM0wfw7KGO858Q/formResponse", {
				        method: "POST",
				        mode: "no-cors",
				        body: formData
				    })
				    .then(() => {
				       Swal.fire({
						    title: "Respuesta recibida",
						    text: "Lady Whistledown ha tomado debida nota de su confirmaci칩n.",
						    icon: "success",
						    confirmButtonText: "Cerrar",
						    showClass: {
						        popup: 'animate__animated animate__fadeInDown'
						    },
						    hideClass: {
						        popup: 'animate__animated animate__fadeOutUp'
						    }
						});
				        form.reset();
				        toggleNinos();
				    })
				    .catch(() => {
				        alert("Hubo un problema al enviar el formulario.");
				    });
				
				    return false;
				}
			</script>
        </main>

        <footer>
            <hr class="double-line">
            <p>Atentamente,</p>
            <p class="signature">Lady Whistledown</p>
        </footer>
    </div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>
